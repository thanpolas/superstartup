(function(){function g(a){throw a;}var i=void 0,j=!0,l=null,m=!1;function o(){return function(){}}function s(a){return function(){return this[a]}}var t,u=this;function aa(a){for(var a=a.split("."),b=u,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}function ba(a){a.l=function(){return a.wa?a.wa:a.wa=new a}}
function v(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ca(a){var b=v(a);return"array"==b||"object"==b&&"number"==typeof a.length}function w(a){return"string"==typeof a}function x(a){return"function"==v(a)}function da(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function y(a){return a[ea]||(a[ea]=++fa)}var ea="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),fa=0;function ga(a,b,c){return a.call.apply(a.bind,arguments)}
function ha(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function B(a,b,c){B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ga:ha;return B.apply(l,arguments)}var ia=Date.now||function(){return+new Date};
function C(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&b!==i?d[f]=b:d=d[f]?d[f]:d[f]={}}function D(a,b){function c(){}c.prototype=b.prototype;a.o=b.prototype;a.prototype=new c};var E={};function ja(a,b){this.Ca=b||{};this.url=a;this.a.e("Init. url:"+a);return this}t=ja.prototype;t.a=F("ss.ajax");t.k={};t.M=o();t.ra=o();t.Ma=function(a,b,c){this.Ja=b+" "+c;this.ra(this.Ja)};t.Na=function(a){this.M(a)};t.send=function(){jQuery||g(Error("We require jQuery for ss.ajax class"));this.a.e("Sending. data:"+ka(this.k));jQuery.ajax(this.url,{type:this.Ca.ha||"POST",data:this.k,dataType:this.Ca.jb||"json",mb:m,global:m,success:B(this.Na,this),error:B(this.Ma,this)})};function G(){try{this.j={O:m,r:[]}}catch(a){H(a)}}G.prototype.addEventListener=function(a,b,c,d){try{x(b)&&(this.j.O=j,this.j.r.push({type:a,hb:m,n:b,Ta:c||u,Oa:d||l}))}catch(f){H(f)}};G.prototype.removeEventListener=function(a,b){try{if(this.j.O){var c=m,d=l;if(x(b))la(this.j.r,function(e,f){e.type==a&&e.n==b&&(c=j,d=f)},this);else if(w(b))la(this.j.r,function(e,f){e.type==a&&e.Oa==b&&(c=j,d=f)},this);else return;c&&I.splice.call(this.j.r,d,1);0==this.j.r.length&&(this.j.O=m)}}catch(f){H(f)}};
G.prototype.Qa=function(a,b){try{if(this.j.O){ma(this.ca,a);var c=Array.prototype.slice.call(arguments,1),d=[];la(this.j.r,function(b,e){if(b.type==a){var f=Array.prototype.slice.call(arguments);f.unshift.apply(f,c);b.n.apply(b.Ta,f);b.hb&&d.push(e)}},this);var f=0;la(d,function(a){I.splice.call(this.j.r,a-f,1);f++},this)}}catch(e){H(e)}};G.prototype.A=G.prototype.Qa;function na(a){this.t={};this.V=".";a&&this.ma(a)}t=na.prototype;t.ma=function(a){a instanceof na?this.t=a.Ga():da(a)?this.t=a:g(new TypeError)};t.Ga=s("t");t.set=function(a,b){"string"!=typeof a&&g(new TypeError);oa(this,a.split(this.V),this.t,{fa:j},b)};t.get=function(a,b){"string"!=typeof a&&g(new TypeError);return oa(this,a.split(this.V),this.t,{vb:j},l,b)};t.remove=function(a){oa(this,a.split(this.V),this.t,{$a:j})};
function oa(a,b,c,d,f,e){var h=b.shift();if(0==b.length){if(d.fa){c[h]=f;return}if(d.$a)delete c[h];else return c[h]===i&&e&&g(new ReferenceError),c[h]}if(c[h]==l)if(d.fa)c[h]={};else return e&&g(new ReferenceError),l;else d.fa&&"object"!=v(c[h])&&(c[h]={});return oa(a,b,c[h],d,f,e)};function J(){na.call(this);this.Y=new na}D(J,na);ba(J);J.prototype.a=F("ss.Config");function pa(a,b){var c=qa;c.a.e("Registering: "+a);var d=j;try{c.Y.get(a,j)}catch(f){d=m}d&&g(Error("Key / path already exists"));c.Y.set(a,b);J.o.set.call(c,a,b)}
J.prototype.set=function(a,b){this.a.log(ra,"Setting: "+a,i);da(b)&&g(new TypeError("value cannot be object type"));var c,d=j;try{c=this.Y.get(a,j)}catch(f){d=m}d&&v(b)!=v(c)&&g(new TypeError("Expected:"+v(c)+" got:"+v(b)+" for:"+a));J.o.set.call(this,a,b)};J.prototype.remove=function(){g(Error("method not supported"))};J.prototype.ma=function(){g(Error("method not supported"))};function sa(a){if(!ta.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ua,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(va,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(wa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(xa,"&quot;"));return a}var ua=/&/g,va=/</g,wa=/>/g,xa=/\"/g,ta=/[&<>\"]/;var K,ya,za,Aa;function Ba(){return u.navigator?u.navigator.userAgent:l}Aa=za=ya=K=m;var Ca;if(Ca=Ba()){var Da=u.navigator;K=0==Ca.indexOf("Opera");ya=!K&&-1!=Ca.indexOf("MSIE");za=!K&&-1!=Ca.indexOf("WebKit");Aa=!K&&!za&&"Gecko"==Da.product}var Ea=K,L=ya,M=Aa,Fa=za,Ga;
a:{var Ha="",Ia;if(Ea&&u.opera)var Ja=u.opera.version,Ha="function"==typeof Ja?Ja():Ja;else if(M?Ia=/rv\:([^\);]+)(\)|;)/:L?Ia=/MSIE\s+([^\);]+)(\)|;)/:Fa&&(Ia=/WebKit\/(\S+)/),Ia)var Ka=Ia.exec(Ba()),Ha=Ka?Ka[1]:"";if(L){var La,Ma=u.document;La=Ma?Ma.documentMode:i;if(La>parseFloat(Ha)){Ga=""+La;break a}}Ga=Ha}var Na={};
function N(a){var b;if(!(b=Na[a])){b=0;for(var c=(""+Ga).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var h=c[e]||"",k=d[e]||"",n=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var r=n.exec(h)||["","",""],p=q.exec(k)||["","",""];if(0==r[0].length&&0==p[0].length)break;b=((0==r[1].length?0:parseInt(r[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==r[1].length?0:parseInt(r[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==r[2].length)<(0==p[2].length)?-1:(0==r[2].length)>(0==p[2].length)?1:0)||(r[2]<p[2]?-1:r[2]>p[2]?1:0)}while(0==b)}b=Na[a]=0<=b}return b}var Oa={};function Pa(){return Oa[9]||(Oa[9]=L&&!!document.documentMode&&9<=document.documentMode)};function Qa(){this.Ea=ia()}new Qa;Qa.prototype.set=function(a){this.Ea=a};Qa.prototype.reset=function(){this.set(ia())};Qa.prototype.get=s("Ea");function Ra(a){var b=O,c;for(c in b)a.call(i,b[c],c,b)}function Sa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}var Ta="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ua(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<Ta.length;e++)c=Ta[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var I=Array.prototype,Va=I.indexOf?function(a,b,c){return I.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(w(a))return!w(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},la=I.forEach?function(a,b,c){I.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=w(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)};
function Wa(a,b){a:for(var c=a.length,d=w(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(i,d[f],f,a))break a};function Xa(a){if("function"==typeof a.F)return a.F();if(w(a))return a.split("");if(ca(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Sa(a)};var Ya="StopIteration"in u?u.StopIteration:Error("StopIteration");function Za(){}Za.prototype.next=function(){g(Ya)};Za.prototype.p=function(){return this};function P(a,b){this.b={};this.d=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.u(a)}t=P.prototype;t.c=0;t.J=0;t.da=s("c");t.F=function(){$a(this);for(var a=[],b=0;b<this.d.length;b++)a.push(this.b[this.d[b]]);return a};function ab(a){$a(a);return a.d.concat()}t.clear=function(){this.b={};this.J=this.c=this.d.length=0};
t.remove=function(a){return Q(this.b,a)?(delete this.b[a],this.c--,this.J++,this.d.length>2*this.c&&$a(this),j):m};function $a(a){if(a.c!=a.d.length){for(var b=0,c=0;b<a.d.length;){var d=a.d[b];Q(a.b,d)&&(a.d[c++]=d);b++}a.d.length=c}if(a.c!=a.d.length){for(var f={},c=b=0;b<a.d.length;)d=a.d[b],Q(f,d)||(a.d[c++]=d,f[d]=1),b++;a.d.length=c}}t.get=function(a,b){return Q(this.b,a)?this.b[a]:b};t.set=function(a,b){Q(this.b,a)||(this.c++,this.d.push(a),this.J++);this.b[a]=b};
t.u=function(a){var b;if(a instanceof P)b=ab(a),a=a.F();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Sa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};t.Ga=function(){$a(this);for(var a={},b=0;b<this.d.length;b++){var c=this.d[b];a[c]=this.b[c]}return a};t.p=function(a){$a(this);var b=0,c=this.d,d=this.b,f=this.J,e=this,h=new Za;h.next=function(){for(;;){f!=e.J&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g(Ya);var h=c[b++];return a?h:d[h]}};return h};
function Q(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function bb(a){this.b=new P;a&&this.u(a)}function cb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+y(a):b.substr(0,1)+a}t=bb.prototype;t.da=function(){return this.b.da()};t.add=function(a){this.b.set(cb(a),a)};t.u=function(a){for(var a=Xa(a),b=a.length,c=0;c<b;c++)this.add(a[c])};t.remove=function(a){return this.b.remove(cb(a))};t.clear=function(){this.b.clear()};t.contains=function(a){a=cb(a);return Q(this.b.b,a)};t.F=function(){return this.b.F()};t.p=function(){return this.b.p(m)};function ka(a){if("undefined"==typeof a)return"undefined";if(a==l)return"NULL";var b=[],c;for(c in a)if(!x(a[c])){var d=c+" = ";try{d+=a[c]}catch(f){d+="*** "+f+" ***"}b.push(d)}return b.join("\n")}
function db(a){function b(a,e){var h=e+"  ";try{if(a!==i)if(a===l)d.push("NULL");else if(w(a))d.push('"'+a.replace(/\n/g,"\n"+e)+'"');else if(x(a))d.push((""+a).replace(/\n/g,"\n"+e));else if(da(a))if(c.contains(a))d.push("*** reference loop detected ***");else{c.add(a);d.push("{");for(var k in a)x(a[k])||(d.push("\n"),d.push(h),d.push(k+" = "),b(a[k],h));d.push("\n"+e+"}")}else d.push(a);else d.push("undefined")}catch(n){d.push("*** "+n+" ***")}}var c=new bb,d=[];b(a,"");return d.join("")}
function eb(a){return fb(a||arguments.callee.caller,[])}
function fb(a,b){var c=[];if(0<=Va(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(gb(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){0<f&&c.push(", ");var e;e=d[f];switch(typeof e){case "object":e=e?"object":"null";break;case "string":break;case "number":e=""+e;break;case "boolean":e=e?"true":"false";break;case "function":e=(e=gb(e))?e:"[fn]";break;default:e=typeof e}40<e.length&&(e=e.substr(0,40)+"...");c.push(e)}b.push(a);c.push(")\n");try{c.push(fb(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function gb(a){if(hb[a])return hb[a];a=""+a;if(!hb[a]){var b=/function ([^\(]+)/.exec(a);hb[a]=b?b[1]:"[Anonymous]"}return hb[a]}var hb={};function ib(a,b,c,d,f){this.reset(a,b,c,d,f)}ib.prototype.ta=l;ib.prototype.sa=l;var jb=0;ib.prototype.reset=function(a,b,c,d,f){"number"==typeof f||jb++;d||ia();this.H=a;this.cb=b;delete this.ta;delete this.sa};ib.prototype.Fa=function(a){this.H=a};function R(a){this.eb=a}R.prototype.Q=l;R.prototype.H=l;R.prototype.ba=l;R.prototype.va=l;function kb(a,b){this.name=a;this.value=b}kb.prototype.toString=s("name");var lb=new kb("SEVERE",1E3),mb=new kb("WARNING",900),nb=new kb("INFO",800),ob=new kb("CONFIG",700),ra=new kb("FINE",500);t=R.prototype;t.getParent=s("Q");t.Fa=function(a){this.H=a};function pb(a){return a.H?a.H:a.Q?pb(a.Q):l}
t.log=function(a,b,c){if(a.value>=pb(this).value){a=this.Ya(a,b,c);b="log:"+a.cb;u.console&&(u.console.timeStamp?u.console.timeStamp(b):u.console.markTimeline&&u.console.markTimeline(b));u.msWriteProfilerMark&&u.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.va)for(var f=0,e=i;e=c.va[f];f++)e(d);b=b.getParent()}}};
t.Ya=function(a,b,c){var d=new ib(a,""+b,this.eb);if(c){d.ta=c;var f;var e=arguments.callee.caller;try{var h;var k=aa("window.location.href");if(w(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var n,q,r=m;try{n=c.lineNumber||c.xb||"Not available"}catch(p){n="Not available",r=j}try{q=c.fileName||c.filename||c.sourceURL||k}catch(z){q="Not available",r=j}h=r||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:n,fileName:q,
stack:c.stack||"Not available"}:c}f="Message: "+sa(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+sa(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+sa(eb(e)+"-> ")}catch(A){f="Exception trying to expose exception! You win, we lose. "+A}d.sa=f}return d};t.info=function(a,b){this.log(nb,a,b)};t.e=function(a,b){this.log(ob,a,b)};var qb={},rb=l;
function F(a){rb||(rb=new R(""),qb[""]=rb,rb.Fa(ob));var b;if(!(b=qb[a])){b=new R(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=F(a.substr(0,c));c.ba||(c.ba={});c.ba[d]=b;b.Q=c;qb[a]=b}return b};!L||Pa();!M&&!L||L&&Pa()||M&&N("1.9.1");L&&N("9");function sb(a,b){P.apply(this,arguments)}D(sb,P);sb.prototype.forEach=function(a,b){for(var c=ab(this),d=this.b,f=b||u,e=0,h=c.length;e<h&&j!==a.call(f,c[e],d[c[e]]);e++);};var tb={id:"0",zb:"",rb:"",wb:"",sb:"",nb:0,tb:m,qb:new sb},ub={ob:"",Ab:m};function vb(a){try{var b=F("ss.user.login.logout"),c=a||o();b.info("Init");E.ua.db.clear();E.Bb.db.clear();var d=new ja("/users/logout",{jb:"json",ha:"POST"});d.M=function(a){b.info("logout server result:"+a.status);wb.ca.A("authState",m);c(j)};d.ra=function(){c(m)};d.send()||c(m)}catch(f){H(f),c(m)}};function xb(){}var yb=0;t=xb.prototype;t.key=0;t.z=m;t.na=m;t.init=function(a,b,c,d,f,e){x(a)?this.ya=j:a&&a.handleEvent&&x(a.handleEvent)?this.ya=m:g(Error("Invalid listener argument"));this.n=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.ea=e;this.na=m;this.key=++yb;this.z=m};t.handleEvent=function(a){return this.ya?this.n.call(this.ea||this.src,a):this.n.handleEvent.call(this.n,a)};!L||Pa();var zb=!L||Pa(),Ab=L&&!N("8");!Fa||N("528");M&&N("1.9b")||L&&N("8")||Ea&&N("9.5")||Fa&&N("528");M&&!N("8")||L&&N("9");function Bb(){}Bb.prototype.qa=m;Bb.prototype.N=function(){this.qa||(this.qa=j,this.v())};Bb.prototype.v=function(){this.Xa&&Cb.apply(l,this.Xa);if(this.Ba)for(;this.Ba.length;)this.Ba.shift()()};function Cb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ca(d)?Cb.apply(l,d):d&&"function"==typeof d.N&&d.N()}};function S(a,b){this.type=a;this.currentTarget=this.target=b}D(S,Bb);t=S.prototype;t.v=function(){delete this.type;delete this.target;delete this.currentTarget};t.s=m;t.defaultPrevented=m;t.R=j;t.stopPropagation=function(){this.s=j};t.preventDefault=function(){this.defaultPrevented=j;this.R=m};function Db(a){Db[" "](a);return a}Db[" "]=o();function T(a,b){a&&this.init(a,b)}D(T,S);t=T.prototype;t.target=l;t.relatedTarget=l;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=m;t.altKey=m;t.shiftKey=m;t.metaKey=m;t.w=l;
t.init=function(a,b){var c=this.type=a.type;S.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(M){var f;a:{try{Db(d.nodeName);f=j;break a}catch(e){}f=m}f||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Fa||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=Fa||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.w=a;a.defaultPrevented&&this.preventDefault();delete this.s};t.stopPropagation=function(){T.o.stopPropagation.call(this);this.w.stopPropagation?this.w.stopPropagation():this.w.cancelBubble=j};
t.preventDefault=function(){T.o.preventDefault.call(this);var a=this.w;if(a.preventDefault)a.preventDefault();else if(a.returnValue=m,Ab)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.v=function(){T.o.v.call(this);this.relatedTarget=this.currentTarget=this.target=this.w=l};var Eb={},U={},O={},Fb={};
function Gb(a,b,c,d,f){if(b)if("array"==v(b))for(var e=0;e<b.length;e++)Gb(a,b[e],c,d,f);else{var d=!!d,h=U;b in h||(h[b]={c:0,h:0});h=h[b];d in h||(h[d]={c:0,h:0},h.c++);var h=h[d],k=y(a),n;h.h++;if(h[k]){n=h[k];for(e=0;e<n.length;e++)if(h=n[e],h.n==c&&h.ea==f){if(h.z)break;return}}else n=h[k]=[],h.c++;e=Hb();e.src=a;h=new xb;h.init(c,e,a,b,d,f);c=h.key;e.key=c;n.push(h);Eb[c]=h;O[k]||(O[k]=[]);O[k].push(h);a.addEventListener?(a==u||!a.pa)&&a.addEventListener(b,e,d):a.attachEvent(b in Fb?Fb[b]:Fb[b]=
"on"+b,e)}else g(Error("Invalid event type"))}function Hb(){var a=Ib,b=zb?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function Jb(a,b,c,d,f){if("array"==v(b))for(var e=0;e<b.length;e++)Jb(a,b[e],c,d,f);else{d=!!d;a:{e=U;if(b in e&&(e=e[b],d in e&&(e=e[d],a=y(a),e[a]))){a=e[a];break a}a=l}if(a)for(e=0;e<a.length;e++)if(a[e].n==c&&a[e].capture==d&&a[e].ea==f){Kb(a[e].key);break}}}
function Kb(a){if(Eb[a]){var b=Eb[a];if(!b.z){var c=b.src,d=b.type,f=b.proxy,e=b.capture;c.removeEventListener?(c==u||!c.pa)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in Fb?Fb[d]:Fb[d]="on"+d,f);c=y(c);f=U[d][e][c];if(O[c]){var h=O[c],k=Va(h,b);0<=k&&I.splice.call(h,k,1);0==h.length&&delete O[c]}b.z=j;f.Aa=j;Lb(d,e,c,f);delete Eb[a]}}}
function Lb(a,b,c,d){if(!d.P&&d.Aa){for(var f=0,e=0;f<d.length;f++)d[f].z?d[f].proxy.src=l:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.Aa=m;0==e&&(delete U[a][b][c],U[a][b].c--,0==U[a][b].c&&(delete U[a][b],U[a].c--),0==U[a].c&&delete U[a])}}function Mb(a){var b,c=0,d=b==l;b=!!b;if(a==l)Ra(function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Kb(f.key),c++}});else if(a=y(a),O[a])for(var a=O[a],f=a.length-1;0<=f;f--){var e=a[f];if(d||b==e.capture)Kb(e.key),c++}}
function Nb(a,b,c,d,f){var e=1,b=y(b);if(a[b]){a.h--;a=a[b];a.P?a.P++:a.P=1;try{for(var h=a.length,k=0;k<h;k++){var n=a[k];n&&!n.z&&(e&=Ob(n,f)!==m)}}finally{a.P--,Lb(c,d,b,a)}}return Boolean(e)}function Ob(a,b){a.na&&Kb(a.key);return a.handleEvent(b)}
function Ib(a,b){if(!Eb[a])return j;var c=Eb[a],d=c.type,f=U;if(!(d in f))return j;var f=f[d],e,h;if(!zb){e=b||aa("window.event");var k=j in f,n=m in f;if(k){if(0>e.keyCode||e.returnValue!=i)return j;a:{var q=m;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(r){q=j}if(q||e.returnValue==i)e.returnValue=j}}q=new T;q.init(e,this);e=j;try{if(k){for(var p=[],z=q.currentTarget;z;z=z.parentNode)p.push(z);h=f[j];h.h=h.c;for(var A=p.length-1;!q.s&&0<=A&&h.h;A--)q.currentTarget=p[A],e&=Nb(h,p[A],d,j,q);if(n){h=
f[m];h.h=h.c;for(A=0;!q.s&&A<p.length&&h.h;A++)q.currentTarget=p[A],e&=Nb(h,p[A],d,m,q)}}else e=Ob(c,q)}finally{p&&(p.length=0),q.N()}return e}d=new T(b,this);try{e=Ob(c,d)}finally{d.N()}return e};function Pb(){}D(Pb,Bb);t=Pb.prototype;t.pa=j;t.I=l;t.addEventListener=function(a,b,c,d){Gb(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Jb(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=U;if(b in c){if(w(a))a=new S(a,this);else if(a instanceof S)a.target=a.target||this;else{var d=a,a=new S(b,this);Ua(a,d)}var d=1,f,c=c[b],b=j in c,e;if(b){f=[];for(e=this;e;e=e.I)f.push(e);e=c[j];e.h=e.c;for(var h=f.length-1;!a.s&&0<=h&&e.h;h--)a.currentTarget=f[h],d&=Nb(e,f[h],a.type,j,a)&&a.R!=m}if(m in c)if(e=c[m],e.h=e.c,b)for(h=0;!a.s&&h<f.length&&e.h;h++)a.currentTarget=f[h],d&=Nb(e,f[h],a.type,m,a)&&a.R!=m;else for(f=this;!a.s&&f&&e.h;f=f.I)a.currentTarget=
f,d&=Nb(e,f,a.type,m,a)&&a.R!=m;a=Boolean(d)}else a=j;return a};t.v=function(){Pb.o.v.call(this);Mb(this);this.I=l};function V(a,b){this.K=m;P.apply(this,arguments);this.K=j}D(V,P);Ua(V.prototype,Pb.prototype);V.prototype.set=function(a,b,c){V.o.set.call(this,a,b);this.K&&this.dispatchEvent(c&&"changeSave"||"change")};V.prototype.u=function(a){this.K=m;V.o.u.call(this,a);this.K=j};function Qb(){this.i={}}D(Qb,Pb);var wb={};function Rb(){this.i={};this.f=m;this.i={performLocalAuth:m,localAuthSourceId:"sourceId",authUrl:"/users/extAuth"};qa&&pa("user.auth",this.i);this.X=this.i.performLocalAuth;this.Ua=new V(tb);this.Ua.u(ub);this.I=u.ib}D(Rb,Qb);ba(Rb);t=Rb.prototype;t.a=F("ss.user.Auth");t.C=new sb;t.D=new sb;t.init=function(){this.D.forEach(function(a,b){b.init()})};
function Sb(a,b){a.a.info("Adding auth source:"+b.g);!b instanceof W&&g(TypeError());a.D.get(b.g)&&g(Error("This ext auth plugin is already registered: "+b.g));a.D.set(b.g,b);b.addEventListener("user.initialAuthStatus",a.Pa,m,a);b.addEventListener("user.extAuthChange",a.Ia,m,a)}t.Pa=function(a){this.a.info("initial auth status dispatched From:"+a.target.g+" Source authed:"+a.target.f);a.target.f&&(this.C.set(a.target.g,j),a.target.S&&Tb(this,a.target.g),!this.f&&!this.X&&Ub(this,j))};
t.Ia=function(a){this.a.info("Auth CHANGE dispatched from:"+a.target.g+" Authed:"+a.target.f);var b=this.C.get(a.target.g);a.target.f?b?this.a.log(mb,"_authChange() BOGUS situation. Received auth event but we already had a record of this source being authed. Double trigger",i):(this.C.set(a.target.g,j),a.target.S&&Tb(this,a.target.g),!this.f&&!this.X&&Ub(this,j)):b?(this.C.remove(a.target.g),0===this.C.da()&&this.f&&Ub(this,m)):this.a.log(mb,"_authChange() BOGUS situation. Received de-auth event but had no record of being authed",
i)};function Tb(a,b){if(a.X){var c=a.D.get(b);a.a.info("Init. _verifyExtAuthWithLocal(). sourceId :"+b+" Local auth started:"+c.ga);c.ga||(c.ga=j,c=a.D.get(b).e("authUrl"),c=new ja(c||a.i.authUrl),c.k[a.i.localAuthSourceId]=b,c.M=B(a.Ra,a),c.send())}}t.Ra=function(a){this.a.info("Init _serverAuthResponse(). status:"+a.status)};function Ub(a,b){a.a.info("Init _doAuth(). isAuthed:"+b);a.f=b;a.dispatchEvent("user.authChange")};function ma(a,b){"array"==v(a)||(a=Sa(a));Wa(a,function(a){return a.type==b?j:m})};function H(a){var b=F("ss.error"),c,d,f;f=a.name;a.fileName?(c=a.fileName,d=a.lineNumber):(c=a.stack.split("\n")[1],d="");a="Error! name:"+f+" Filename:"+c+" line:"+d+" msg:"+a.message+" source:";b.log(lb,a,i);console&&console.debug(a)};function X(a,b){var c;if(x(a))return c=X.l(X.Ha),c.$(a),c;c=X.l(a);b&&(c=new Y(a),X.db.aa.set(a,c));return c}X.Ha="main";X.db={aa:new P};X.l=function(a){var b=X.db.aa.get(a);if(b)return b;b=new Y(a);X.db.aa.set(a,b);return b};function Y(a){this.za=a;this.fn=new P;this.m=new P;this.q=new P}t=Y.prototype;t.done=m;t.ab=s("done");t.xa=function(a){return this.m.get(a).done||m};t.$=function(a,b){if(this.done)a();else{var c={fn:a,delay:b||0},d=y(c);this.fn.set(d,c);return d}};t.gb=function(a){this.fn.remove(a)};
t.Va=function(a,b){if(this.done||this.xa(a))return b(),NaN;this.m.get(a)||this.la(a);var c={oa:a,fn:b},d=y(c);this.q.set(d,c);return d};t.fb=function(a){this.q.remove(a)};t.la=function(a){this.m.get(a)||this.m.set(a,{oa:a,done:m})};
t.Wa=function(a){var b=this.m.get(a);if(b){b.done=j;if(this.m.get(a)){var c=this.q.p(j),d,f,e=[];try{for(;d=c.next();)f=this.q.get(d),f.oa==a&&(x(f.fn)&&f.fn(),e.push(d))}catch(h){}c=e.length;for(d=0;d<c;d++)this.q.remove(e[d])}this.m.set(a,b)}var k;a:{var a=this.m.p(m),n;try{for(;n=a.next();)if(!n.done){k=m;break a}}catch(q){}k=j}if(k){this.done=j;k=this.q.p(m);var r;try{for(;r=k.next();)x(r.fn)&&r.fn()}catch(p){}this.q.clear();r=this.fn.p(m);var z;try{for(;z=r.next();)x(z.fn)&&(0==z.delay?z.fn():
setTimeout(z.fn,z.delay))}catch(A){}this.fn.clear()}};C("ss.ready",X);C("ss.ready.C",Y);C("ss.ready.C.prototype.addCheck",Y.prototype.la);C("ss.ready.C.prototype.check",Y.prototype.Wa);C("ss.ready.C.prototype.addCheckListener",Y.prototype.Va);C("ss.ready.C.prototype.removeCheckListener",Y.prototype.fb);C("ss.ready.C.prototype.addListener",Y.prototype.$);C("ss.ready.C.prototype.removeListener",Y.prototype.gb);C("ss.ready.C.prototype.isDone",Y.prototype.ab);C("ss.ready.C.prototype.isDoneCheck",Y.prototype.xa);X(function(){try{F("ss.web.user.ui.Init").info("Init - Binding on login / logout elements"),$(".-logout").click(Vb),Wb()}catch(a){H(a)}});var Xb=new G;function Vb(a){try{a.preventDefault();var b=F("ss.web.user.login.logout");b.info("Init. Authed:"+wb.f);if(wb.f){var c=$(this).attr("id");wb.ca.A("logout_click",c);vb(function(a){b.info("logout callback received. status:"+a)})}}catch(d){H(d)}}
function Wb(){try{var a=F("ss.web.user.login.bindLogin");$(".-login-tw").click(function(b){try{b.preventDefault();var d=$(this).attr("id");a.info("Twitter login clicked:"+d);E.yb.bb();Xb.A("tw_click",d)}catch(f){H(f)}});$(".-login-fb").click(function(b){try{b.preventDefault();var d=$(this).attr("id"),f=$(this);a.info("Facebook login clicked:"+d);E.ua.ub()?(E.ua.bb(function(b){a.info("Login return state:"+b);Xb.A("fb_click_reply",b)}),Xb.A("fb_click",d)):Yb||(a.info("Facebook library not ready yet, created a listener and we now wait..."),
Yb=j,X("fb-auth").$(function(){Yb=m;wb.f||f.click()}))}catch(e){H(e)}})}catch(b){H(b)}};var Yb=m;var Zb=0;function $b(a){try{if("number"==typeof a.permId&&!(0>=a.permId)){try{JSON.parse(a.metadata)}catch(b){}Zb++}}catch(c){H(c)}};var Z={ka:[]},ac=m,bc=m;Z.W=[];Z.Z=[];Z.G=function(a,b,c,d){a={za:a,fn:b,Da:c||100,ready:d};d?(ac=j,Z.Z.push(a)):bc?a.fn(j):Z.W.push(a)};Z.ja=function(a,b){var c=b?Z.W:Z.Z;Array.prototype.sort.call(c,cc);for(var d=c.length;d--;){for(var f=c[d],e=[],h=0,k=a.length;h<k;h++)f.za==a[h].nameId&&(f.fn(a[h].value),e.push(h));h=0;for(f=e.length;h<f;h++)Array.prototype.splice.call(a,e[h],1)}};function cc(a,b){return a.Da<b.Da};function dc(a){this.L=a;return B(this.Za,this)}dc.prototype.Za=function(a,b){switch(v(a)){case "object":for(var c in a)this.L[c]=a[c];break;case "string":if(1<arguments.length)this.L[a]=b;else return this.L[a];break;case "undefined":return this.L;default:g(new TypeError("Expecting a string, object or undefined"))}};function W(){this.i={};this.I=this.U=Rb.l();this.e=new dc(this.i)}D(W,Qb);W.prototype.f=m;W.prototype.ga=m;function ec(){W.call(this);this.S=m;this.e("loginUrl","/users/twitter");this.e("returnPathParam","url");qa&&pa("user.auth.ext.twitter",this.i);Sb(this.U,this)}D(ec,W);ba(ec);ec.prototype.a=F("ss.user.auth.Twitter");ec.prototype.g="Twitter";ec.prototype.init=function(){this.a.info("Init init(). Dispatching dummy event");this.dispatchEvent("user.initialAuthStatus")};function fc(){try{var a=navigator.cookieEnabled?j:m;"undefined"==typeof navigator.cookieEnabled&&!a&&(document.cookie="testcookie",a=-1!=document.cookie.indexOf("testcookie")?j:m);return a}catch(b){H(b)}};function gc(){W.call(this);this.S=j;this.e("app_id","");this.e("permissions","");this.e("loadFBjsAPI",j);this.e("jsAPI","connect.facebook.net/en_US/all.js");this.e("jsAPIdebug","static.ak.fbcdn.net/connect/en_US/core.debug.js");qa&&pa("user.auth.ext.fb",this.i);Sb(this.U,this)}D(gc,W);ba(gc);t=gc.prototype;t.a=F("ss.user.auth.Facebook");t.B=m;t.ia=m;t.g="Facebook";
t.init=function(a){this.a.info("Init init(). FB JS API loaded:"+this.B);if(this.B)a&&a.stopPropagation(),FB.getLoginStatus(B(this.La,this));else{this.addEventListener("user.facebook.jsAPIloaded",this.init,m,this);try{if(this.a.info("Init _loadExtAPI(). FB API Loaded:"+this.B),!this.B)if(this.e("loadFBjsAPI")){u.fbAsyncInit=B(this.Ka,this);var b=document.createElement("script"),c=document.location.protocol,c=E.lb?c+("//"+this.e("jsAPIdebug")):c+("//"+this.e("jsAPI"));b.src=c;b.async=j;document.getElementById("fb-root").appendChild(b)}else this.a.log(mb,
"JS API load is closed from Config. Assuming API loaded synchronously",i),this.pb()}catch(d){H(d)}}};t.La=function(a){this.a.info("Init _gotInitialAuthStatus()");hc(this,a);this.ia=j;this.dispatchEvent("user.initialAuthStatus")};t.Ka=function(){this.a.info("FB JS API Loaded");this.B=j;this.a.info("Init _FBinit(). FB appId:"+(this.T||(this.T=this.e("app_id"))));FB.init({appId:this.T||(this.T=this.e("app_id")),status:j,cookie:j,xfbml:j,oauth:j});FB.Event.subscribe("auth.sessionChange",this.Sa);this.dispatchEvent("user.facebook.jsAPIloaded")};
t.Sa=function(a){this.a.info("Init _sessionChange()");hc(this,a)};function hc(a,b){try{a.a.info("Init _isAuthedFromResponse(). Deep expose of response:"+db(b));var c="connected"==b.status;c!=a.f&&(a.f=c,a.ia&&a.dispatchEvent("user.extAuthChange"))}catch(d){H(d)}};C("ss",{});C("ss.server",function(a){bc=j;Z.ja(a,j);ac?Z.ka=a:(delete Z.W,delete Z.Z,delete Z.ka,delete Z.G,delete Z.ja)});C("ss.metrics.trackEvent",o());C("ss.metrics.trackMetrics",function(a,b,c,d,f,e,h){var k=new ja("/mtr/track",{ha:"POST"});k.k.category=a;k.k.mtraction=b;k.k.label=c||"";k.k.value=d||"";k.k.value2=f||"";k.k.value3=e||"";k.k.value4=h||"";k.send()});C("ss.metrics.trackPageview",o());/*
 Apache License, Version 2.0
 @author Athanasios Polychronakis <thanpolas@gmail.com>
 createdate 03/Mar/2010
 @package Superstartup library
*/
var qa=J.l();function ic(){this.i={};this.e=J.l()}D(ic,Qb);ba(ic);ic.prototype.a=F("ss.Core");ic.prototype.init=function(){this.a.info("Kicking off init()");this.kb.init()};var jc=u.ib=ic.l();jc.a.info("synchInit() Starting...");jc.kb=Rb.l();gc.l();ec.l();Z.G("analytics",o());Z.G("121",function(){wb.ca.A("newUser")});Z.G("metadata",$b);Z.G("25",function(){if(fc()){var a=new ja("/users/pc",{ha:"POST"});a.M=function(a){da(a.metadataRoot)&&$b(a.metadataRoot)};a.send()}});}).call(this);
